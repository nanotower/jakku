{"ast":null,"code":"import _defineProperty from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import{NavLink}from\"react-router-dom\";import{Button,Tabs,Tab}from\"react-materialize\";import{withRouter}from\"react-router-dom\";import ShowBid from\"./ShowMyBid\";import AllProducts from\"../organisms/AllProducts\";import SearchBar from\"../atoms/SearchBar\";import Bidmapcontainer from\"../molecules/Bidmapcontainer\";import RoutesService from\"../../RoutesService\";var HomeLogged=/*#__PURE__*/function(_Component){_inherits(HomeLogged,_Component);function HomeLogged(props){var _this;_classCallCheck(this,HomeLogged);_this=_possibleConstructorReturn(this,_getPrototypeOf(HomeLogged).call(this,props));_this.state={products:props.products,searchProducts:props.products,bids:null};_this.router=new RoutesService();return _this;}_createClass(HomeLogged,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.router.getProducts().then(function(response){var bids=response.map(function(product){return product.bid;});bids.forEach(function(bid){return bid.productsList.map(function(id){return response.filter(function(product){return product._id===id;});});});var bidsId=[];bids=bids.filter(function(bid){if(bidsId.includes(bid._id)){return false;}else{bidsId.push(bid._id);return true;}});_this2.setState(_objectSpread({},_this2.state,{products:response,bids:bids}));console.log(_this2.state);});}},{key:\"makeSearch\",value:function makeSearch(searchText){console.log(this.props);var searchProductsResults=this.state.products.filter(function(product){return product.name.toLowerCase().includes(searchText.toLowerCase());});console.log(this.state);this.setState(_objectSpread({},this.state,{searchProducts:searchProductsResults}));}// changeStock(stockCheckbox) {\n//   this.setState({\n//     ...this.state,\n//     inStock: stockCheckbox\n//   });\n// }\n},{key:\"render\",value:function render(){var _this3=this;if(!this.props.user.bid){return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Si te acabas de mudar o est\\xE1s a punto de mudarte, podemos ayudarte\"),React.createElement(NavLink,{to:\"/create-bid\"},React.createElement(Button,null,\"Me voy a mudar\")),React.createElement(NavLink,{to:\"/create-bid\"},\"Me acabo de mudar\"));}else{if(this.props.products&&this.state.bids){return React.createElement(React.Fragment,null,React.createElement(Tabs,{className:\"tab-demo z-depth-1\",options:{swipeable:true}},React.createElement(Tab,{title:\"Tu mudanza\"},React.createElement(ShowBid// fromApp={() => this.fetchUser()}\n,{user:this.props.user})),React.createElement(Tab,{title:\"Test 2\",active:true,className:\"red\"},\"Test 2\")),React.createElement(SearchBar,{updateSearch:function updateSearch(searchText){return _this3.makeSearch(searchText);}// updateInStock={stockCheckbox => this.changeStock(stockCheckbox)}\n}),React.createElement(Bidmapcontainer,{bids:this.state.bids,centerMap:this.props.centerMap}),React.createElement(AllProducts,{products:this.props.products}));}else{return React.createElement(React.Fragment,null,React.createElement(\"h1\",null,\"Loading...\"));}}}}]);return HomeLogged;}(Component);export default withRouter(HomeLogged);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/HomeLogged.jsx"],"names":["React","Component","NavLink","Button","Tabs","Tab","withRouter","ShowBid","AllProducts","SearchBar","Bidmapcontainer","RoutesService","HomeLogged","props","state","products","searchProducts","bids","router","getProducts","then","response","map","product","bid","forEach","productsList","id","filter","_id","bidsId","includes","push","setState","console","log","searchText","searchProductsResults","name","toLowerCase","user","swipeable","makeSearch","centerMap"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button, Tabs, Tab } from \"react-materialize\";\nimport { withRouter } from \"react-router-dom\";\nimport ShowBid from \"./ShowMyBid\";\nimport AllProducts from \"../organisms/AllProducts\";\nimport SearchBar from \"../atoms/SearchBar\";\nimport Bidmapcontainer from \"../molecules/Bidmapcontainer\";\nimport RoutesService from \"../../RoutesService\";\n\n\nclass HomeLogged extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: props.products,\n      searchProducts: props.products,\n      bids: null\n    };\n    this.router= new RoutesService;\n  }\n\n  componentDidMount() {\n    this.router.getProducts()\n    .then(response=> {\n      let bids= response.map(product=> product.bid);\n      bids.forEach(bid=> bid.productsList.map(id=> response.filter(product=> product._id===id)))\n      let bidsId= []\n      bids= bids.filter(bid=> {\n        if(bidsId.includes(bid._id)) {\n          return false\n        }\n        else {\n          bidsId.push(bid._id);\n          return true\n        }\n      })\n      this.setState({\n        ...this.state,\n        products: response,\n        bids: bids\n      })\n      console.log(this.state)\n    })\n  }\n\n  makeSearch(searchText) {\n    console.log(this.props);\n    const searchProductsResults = this.state.products.filter(product =>\n      product.name.toLowerCase().includes(searchText.toLowerCase())\n    );\n    console.log(this.state);\n\n    this.setState({\n      ...this.state,\n      searchProducts: searchProductsResults\n    });\n  }\n\n  // changeStock(stockCheckbox) {\n  //   this.setState({\n  //     ...this.state,\n  //     inStock: stockCheckbox\n  //   });\n  // }\n\n\n  render() {\n    if (!this.props.user.bid) {\n      return (\n        <div>\n          {/* <h1>Hola, {this.props.user.username}</h1> */}\n          <h1>\n            Si te acabas de mudar o est√°s a punto de mudarte, podemos ayudarte\n          </h1>\n          <NavLink to={\"/create-bid\"}>\n            <Button>Me voy a mudar</Button>\n          </NavLink>\n          <NavLink to={\"/create-bid\"}>Me acabo de mudar</NavLink>\n        </div>\n      );\n    } else {\n      if (this.props.products && this.state.bids) {\n        return (\n          <React.Fragment>\n            {/* <h1>Hola, {this.props.user.username}</h1> */}\n            <Tabs className=\"tab-demo z-depth-1\" options={{ swipeable: true }}>\n              <Tab title=\"Tu mudanza\" >\n                   <ShowBid\n                    // fromApp={() => this.fetchUser()}\n                    user={this.props.user}\n                  ></ShowBid>\n              </Tab>\n              <Tab title=\"Test 2\" active className=\"red\">\n                Test 2\n              </Tab>\n            </Tabs>\n\n{/*       \n            <NavLink to={\"/your-bid\"}>\n              <Button>Panel de control de mudanza</Button>\n            </NavLink> */}\n\n            <SearchBar\n              updateSearch={searchText => this.makeSearch(searchText)}\n              // updateInStock={stockCheckbox => this.changeStock(stockCheckbox)}\n            />\n\n            <Bidmapcontainer\n              bids={this.state.bids}\n              centerMap={this.props.centerMap}\n            ></Bidmapcontainer>\n         \n         \n            <AllProducts products={this.props.products}></AllProducts>\n          </React.Fragment>\n        );\n      } else {\n        return (\n          <React.Fragment>\n            <h1>Loading...</h1>\n          </React.Fragment>\n        ); \n      }\n    }\n  }\n}\n\nexport default withRouter(HomeLogged);\n"]},"metadata":{},"sourceType":"module"}