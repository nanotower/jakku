{"ast":null,"code":"import _defineProperty from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/fer/ironhack/week_8/jakku/client/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import{NavLink}from\"react-router-dom\";import Bidmapcontainer from\"../molecules/Bidmapcontainer\";import{Row,Card,CardTitle,Col,Preloader}from\"react-materialize\";import AllProducts from\"../organisms/AllProducts\";import ButtonAdd from\"../atoms/ButtonAdd\";import CollapsibleProducs from\"../molecules/CollapsibleProducs\";import RoutesService from\"../../RoutesService\";import PreloaderSpinner from\"../atoms/PreloaderSpinner\";import{withRouter}from\"react-router-dom\";import moment from\"moment\";import\"moment/locale/es\";import DelModalWarning from\"../molecules/DelModalWarning\";moment.locale(\"es\");var ShowMyBid=/*#__PURE__*/function(_Component){_inherits(ShowMyBid,_Component);function ShowMyBid(props){var _this;_classCallCheck(this,ShowMyBid);_this=_possibleConstructorReturn(this,_getPrototypeOf(ShowMyBid).call(this,props));_this.componentDidMount=function(){// this.setState({\n//   ...this.state,\n//   products:this.props.user.products\n// })\n// this.router.getProducts().then(response => {\n//   const products= response.filter(product=> product.owner==this.props.user._id)\n//   this.setState({\n//     ...this.state,\n//     products: products\n//   });\n// });\n// console.log(this.state)\n_this.props.fromApp().then(function(){_this.setState(_objectSpread({},_this.state,{user:_this.props.user,products:_this.props.user.products}));});};_this.deleteProduct=function(id){console.log(id);console.log(\"borrando\");_this.router.deleteProduct(id).then(function(user){_this.setState(_objectSpread({},_this.state,{user:user,products:user.products}));});};_this.goBack=function(){_this.props.history.push(\"/\");};_this.transformDate=function(){moment.lang(\"es\");var dateTransformed=moment(_this.props.user.bid.deadLine).format(\"LL\");return React.createElement(\"p\",null,dateTransformed);};_this.state={user:_this.props.user,product:_this.props.user.products};_this.router=new RoutesService();return _this;}_createClass(ShowMyBid,[{key:\"extractCoordinates\",value:function extractCoordinates(latlng){var lat=latlng[0];var lng=latlng[1];return[{lat:lat,lng:lng}];}},{key:\"render\",value:function render(){var _this2=this;if(this.props.user.bid){if(this.state.user.products){return React.createElement(\"div\",{className:\"your-bid-container\"},React.createElement(\"a\",{className:\"back-btn\"},React.createElement(\"i\",{class:\"medium material-icons\",onClick:this.goBack},\"arrow_back\")),React.createElement(\"h1\",null,\"Panel de control de tu mudanza\"),React.createElement(\"div\",{className:\"content\"},React.createElement(\"div\",{className:\"info-container\"},React.createElement(\"h4\",{className:\"text-title\"},\"Recogida\"),React.createElement(\"div\",{className:\"top-box\"},React.createElement(\"div\",{className:\"text-container\"},React.createElement(\"p\",null,\"Recoger\\xE1n las cosas el d\\xEDa\",\" \",React.createElement(\"span\",null,this.transformDate()),\" \"),React.createElement(\"p\",null,\"entre las \",React.createElement(\"span\",null,this.props.user.bid.from),\" y las\",\" \",React.createElement(\"span\",null,this.props.user.bid.to)),React.createElement(\"p\",null,\"En \",React.createElement(\"span\",null,this.props.user.bid.location.address))),React.createElement(Bidmapcontainer,{title:\"Localización de la subasta\",bids:[this.props.user.bid],centerBid:this.props.centerBid,zoomMap:18// mapSize={this.props.mapSize}\n,centerMap:{lat:this.props.user.bid.location.coordinates[1],lng:this.props.user.bid.location.coordinates[0]},mapSize:[30,400]}))),React.createElement(\"div\",{className:\"box-container\"},React.createElement(\"div\",{className:\"boxes\"},React.createElement(\"h4\",{className:\"box-title\"},\"Tus cajas\"),React.createElement(CollapsibleProducs,{products:this.state.products,user:this.state.user,deleteFromShow:function deleteFromShow(id){return _this2.deleteProduct(id);}}),React.createElement(ButtonAdd,{product:true,passText:\"Ya no vendo esta caja\"})))));}else{return React.createElement(PreloaderSpinner,null);}}else{return React.createElement(\"div\",{className:\"your-bid-container\"},React.createElement(\"p\",null,\"No tienes ninguna mudanza creada.\"),React.createElement(ButtonAdd,{bid:true}));}}}]);return ShowMyBid;}(Component);export default withRouter(ShowMyBid);","map":{"version":3,"sources":["/Users/fer/ironhack/week_8/jakku/client/src/components/pages/ShowMyBid.jsx"],"names":["React","Component","NavLink","Bidmapcontainer","Row","Card","CardTitle","Col","Preloader","AllProducts","ButtonAdd","CollapsibleProducs","RoutesService","PreloaderSpinner","withRouter","moment","DelModalWarning","locale","ShowMyBid","props","componentDidMount","fromApp","then","setState","state","user","products","deleteProduct","id","console","log","router","goBack","history","push","transformDate","lang","dateTransformed","bid","deadLine","format","product","latlng","lat","lng","from","to","location","address","centerBid","coordinates"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport Bidmapcontainer from \"../molecules/Bidmapcontainer\";\nimport { Row, Card, CardTitle, Col, Preloader } from \"react-materialize\";\nimport AllProducts from \"../organisms/AllProducts\";\nimport ButtonAdd from \"../atoms/ButtonAdd\";\nimport CollapsibleProducs from \"../molecules/CollapsibleProducs\";\nimport RoutesService from \"../../RoutesService\";\nimport PreloaderSpinner from \"../atoms/PreloaderSpinner\";\nimport { withRouter } from \"react-router-dom\";\nimport moment from \"moment\";\nimport \"moment/locale/es\";\nimport DelModalWarning from \"../molecules/DelModalWarning\";\nmoment.locale(\"es\");\n\nclass ShowMyBid extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      product: this.props.user.products\n    };\n    this.router = new RoutesService();\n  }\n  componentDidMount = () => {\n    // this.setState({\n    //   ...this.state,\n    //   products:this.props.user.products\n    // })\n    // this.router.getProducts().then(response => {\n    //   const products= response.filter(product=> product.owner==this.props.user._id)\n    //   this.setState({\n    //     ...this.state,\n    //     products: products\n    //   });\n    // });\n    // console.log(this.state)\n    this.props.fromApp().then(() => {\n      this.setState({\n        ...this.state,\n        user: this.props.user,\n        products: this.props.user.products\n      });\n    });\n  };\n\n  deleteProduct = id => {\n    console.log(id);\n    console.log(\"borrando\");\n    this.router.deleteProduct(id).then(user => {\n      this.setState({\n        ...this.state,\n        user: user,\n        products: user.products\n      });\n    });\n  };\n\n  goBack = () => {\n    this.props.history.push(\"/\");\n  };\n\n  transformDate = () => {\n    moment.lang(\"es\");\n    const dateTransformed = moment(this.props.user.bid.deadLine).format(\"LL\");\n    return <p>{dateTransformed}</p>;\n  };\n\n  extractCoordinates(latlng) {\n    const lat = latlng[0];\n    const lng = latlng[1];\n    return [{ lat, lng }];\n  }\n\n  render() {\n    if (this.props.user.bid) {\n      if (this.state.user.products) {\n        return (\n          <div className=\"your-bid-container\">\n            <a className=\"back-btn\">\n              <i class=\"medium material-icons\" onClick={this.goBack}>\n                arrow_back\n              </i>\n            </a>\n            <h1>Panel de control de tu mudanza</h1>\n            <div className=\"content\">\n              <div className=\"info-container\">\n              <h4 className=\"text-title\">Recogida</h4>\n                <div className=\"top-box\">\n                  \n                  <div className=\"text-container\">\n                    <p>\n                      Recogerán las cosas el día{\" \"}\n                      <span>{this.transformDate()}</span>{\" \"}\n                    </p>\n                    <p>\n                      entre las <span>{this.props.user.bid.from}</span> y las{\" \"}\n                      <span>{this.props.user.bid.to}</span>\n                    </p>\n                    <p>\n                      En <span>{this.props.user.bid.location.address}</span>\n                    </p>\n                  </div>\n                  <Bidmapcontainer\n                    title={\"Localización de la subasta\"}\n                    bids={[this.props.user.bid]}\n                    centerBid={this.props.centerBid}\n                    zoomMap={18}\n                    // mapSize={this.props.mapSize}\n                    centerMap={{\n                      lat: this.props.user.bid.location.coordinates[1],\n                      lng: this.props.user.bid.location.coordinates[0]\n                    }}\n                    mapSize={[30, 400]}\n                  ></Bidmapcontainer>\n                </div>\n              </div>\n              <div className=\"box-container\">\n                <div className=\"boxes\">\n                  <h4 className=\"box-title\">Tus cajas</h4>\n\n                  <CollapsibleProducs\n                    products={this.state.products}\n                    user={this.state.user}\n                    deleteFromShow={id => this.deleteProduct(id)}\n                  ></CollapsibleProducs>\n                  <ButtonAdd\n                    product={true}\n                    passText=\"Ya no vendo esta caja\"\n                  ></ButtonAdd>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      } else {\n        return <PreloaderSpinner></PreloaderSpinner>;\n      }\n    } else {\n      return (\n        <div className=\"your-bid-container\">\n          <p>No tienes ninguna mudanza creada.</p>\n          <ButtonAdd bid={true}></ButtonAdd>\n        </div>\n      );\n    }\n  }\n}\nexport default withRouter(ShowMyBid);\n"]},"metadata":{},"sourceType":"module"}